<!DOCTYPE html>
{% load static %}
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dresscode - Inicio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="{% static 'css/inicios.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-dark': '#5B9B9D',
                        'primary-accent': '#e91e63',
                        'secondary-btn': '#ff9800',
                        'bg-light': '#f0f2f5',
                        'border-subtle': 'rgba(0, 0, 0, 0.1)',
                        'muted-text': '#717182',
                        'card-bg': '#ffffff',
                        'btn-generate': '#f9a86e', 
                        'btn-capture': '#e96d74',
                        'bone-white': '#f5f1e8',
                    },
                }
            }
        }
    </script>
</head>
<body>
    <!-- Bot√≥n de cambio de tema -->
    <div class="theme-toggle-wrapper">
        <button id="theme-toggle" class="theme-button">
            <span class="icon-moon">üåô</span>
            <span class="icon-sun">‚òÄÔ∏è</span>
        </button>
    </div>

    <!-- Men√∫ lateral -->
    <button class="menu-toggle">‚ò∞</button>
    <div class="side-menu">
        <nav>
            <a href="{% url 'inicio' %}">
                <i class="fas fa-home"></i>
                Inicio
            </a>
            <a href="{% url 'ver_prendas_temp' %}">
                <i class="fas fa-tshirt"></i>
                Mis outfits
            </a>
            <a href="{% url 'configurationsystem' %}">
                <i class="fas fa-cog"></i>
                Configuraci√≥n
            </a>
            <a href="{% url 'ayuda_contacto' %}">
                <i class="fas fa-question-circle"></i>
                Contacto y ayuda
            </a>
        </nav>
    </div>
    <div class="menu-overlay"></div>

    <!-- Header -->
    <header>
        <nav class="header-nav">
            <a href="{% url 'my_closet' %}">Armario</a>
            <div id="weather-display" class="weather-display">
                <i class="fas fa-cloud-sun text-yellow-500"></i>
                <span>22¬∞C</span>
            </div>
            <a href="javascript:void(0)" class="favorites-trigger">Favoritos</a>
        </nav>
        
        <!-- Perfil de usuario -->
        <div class="user-profile">
            <div class="profile-dropdown" id="profileDropdown">
                <div class="user-icon" id="userIcon">
                    <i class="fas fa-user default-icon"></i>
                </div>
                <div class="profile-dropdown-content">
                    <a href="{% url 'sideface' %}">
                        <i class="fas fa-user-circle"></i>
                        Mi Perfil
                    </a>
                    <a href="{% url 'configurationsystem' %}">
                        <i class="fas fa-cog"></i>
                        Configuraci√≥n
                    </a>
                    <a href="{% url 'logout' %}">
                        <i class="fas fa-sign-out-alt"></i>
                        Cerrar Sesi√≥n
                    </a>
                </div>
            </div>
        </div>
        
        <!-- Logo -->
        <div class="logo" aria-label="logo">
            <img src="{% static 'img/logo.png' %}" alt="DressCode Logo">
        </div>
    </header>

    <!-- Contenido principal -->
    <main>
        <!-- Secci√≥n de texto -->
        <section class="left-text">
            <h1>¬°TU ROPA Y ESTILO, AL M√ÅXIMO!</h1>
            <p>Captura, combina y guarda tus looks para cada ocasi√≥n, aprovechando al m√°ximo cada prenda.</p>
            
            <!-- Botones de acci√≥n -->
            <div class="button-group">
                <a href="{% url 'recomendar_outfit' %}" class="action-button btn-generate">
                    <i class="fas fa-bolt"></i>
                    Generar Outfit
                </a>
                <a href="{% url 'seleccionar_categoria' %}" class="action-button btn-capture">
                    <i class="fas fa-camera"></i>
                    Capturar Prenda
                </a>
            </div>
        </section>
        
        <!-- Container principal con modelo segmentado -->
        <div id="container">
            <!-- Contenedor del modelo -->
            <div class="model-container">
                <!-- Segmento 1 - Superior (Camisas, tops, sudaderas, chalecos) -->
                <div class="model-segment segment-1" id="segmento-1">
                    {% for prenda in prendas_segmento_1 %}
                        <img src="{{ prenda.imagen }}" 
                             alt="{{ prenda.tipo }} - {{ prenda.color }}"
                             class="segment-image {% if forloop.first %}active{% endif %}"
                             data-id="{{ prenda.id|default:'0' }}"
                             data-tipo="{{ prenda.tipo }}"
                             data-color="{{ prenda.color }}"
                             data-index="{{ forloop.counter0 }}">
                    {% empty %}
                        <!-- Si no hay prendas, mostrar mensaje -->
                        <div class="segment-empty-message">
                            <i class="fas fa-tshirt"></i>
                            <span>No tienes prendas superiores</span>
                        </div>
                    {% endfor %}
                </div>
                
                <!-- Segmento 2 - Medio (Pantalones, faldas, shorts) -->
                <div class="model-segment segment-2" id="segmento-2">
                    {% for prenda in prendas_segmento_2 %}
                        <img src="{{ prenda.imagen }}" 
                             alt="{{ prenda.tipo }} - {{ prenda.color }}"
                             class="segment-image {% if forloop.first %}active{% endif %}"
                             data-id="{{ prenda.id|default:'0' }}"
                             data-tipo="{{ prenda.tipo }}"
                             data-color="{{ prenda.color }}"
                             data-index="{{ forloop.counter0 }}">
                    {% empty %}
                        <!-- Si no hay prendas, mostrar mensaje -->
                        <div class="segment-empty-message">
                            <i class="fas fa-tshirt"></i>
                            <span>No tienes prendas inferiores</span>
                        </div>
                    {% endfor %}
                </div>
                
                <!-- Segmento 3 - Inferior (Calzado) -->
                <div class="model-segment segment-3" id="segmento-3">
                    {% for prenda in prendas_segmento_3 %}
                        <img src="{{ prenda.imagen }}" 
                             alt="{{ prenda.tipo }} - {{ prenda.color }}"
                             class="segment-image {% if forloop.first %}active{% endif %}"
                             data-id="{{ prenda.id|default:'0' }}"
                             data-tipo="{{ prenda.tipo }}"
                             data-color="{{ prenda.color }}"
                             data-index="{{ forloop.counter0 }}">
                    {% empty %}
                        <!-- Si no hay prendas, mostrar mensaje -->
                        <div class="segment-empty-message">
                            <i class="fas fa-shoe-prints"></i>
                            <span>No tienes calzado</span>
                        </div>
                    {% endfor %}
                </div>
                
                <!-- Controles del carrusel - Solo se muestran si hay al menos 2 prendas -->
                {% if prendas_segmento_1|length > 1 or prendas_segmento_2|length > 1 or prendas_segmento_3|length > 1 %}
                <div class="carousel-controls">
                    {% with max_slides=prendas_segmento_1|length|add:prendas_segmento_2|length|add:prendas_segmento_3|length|divisibleby:3|default:5 %}
                    {% for i in "01234"|make_list %}
                        {% if forloop.counter0 < max_slides %}
                        <div class="carousel-dot {% if forloop.first %}active{% endif %}" data-slide="{{ forloop.counter0 }}"></div>
                        {% endif %}
                    {% endfor %}
                    {% endwith %}
                </div>
                {% endif %}
            </div>
            
            <!-- Formas decorativas -->
            <div class="shape shape1"></div>
            <div class="shape shape2"></div>
            <div class="shape shape3"></div>
            <div class="shape shape4"></div>
            <div class="shape shape5"></div>
            <div class="shape shape6"></div>
        </div>
    </main>

    <!-- Bot√≥n para activar accesorios -->
<div class="accessories-section">
    <button id="toggle-accessories" class="accessories-toggle-btn">
        <i class="fas fa-plus-circle"></i>
        Activar accesorios
    </button>
    
    <!-- Panel de accesorios -->
    <div class="accessories-panel" id="accessoriesPanel">
        <div class="accessories-header">
            <h3>Accesorios</h3>
            <button class="add-accessory-btn" id="addAccessoryBtn">
                <i class="fas fa-plus"></i>
                A√±adir
            </button>
        </div>
        
        <div class="accessories-grid" id="accessoriesGrid">
            <!-- Los contenedores se agregar√°n din√°micamente aqu√≠ -->
        </div>
    </div>
</div>

    <!-- Men√∫ m√≥vil -->
    <div class="mobile-menu">
        <h2>Men√∫</h2>
        
        <div class="menu-items">
            <a href="{% url 'visioncomputer' %}" class="menu-item">
                <div class="menu-icon">
                    <i class="fas fa-user"></i>
                </div>
                <div class="menu-content">
                    <p>Reconocimiento de corporalidad</p>
                    <span>Capturate</span>
                </div>
            </a>

            <a href="{% url 'ver_prendas_temp' %}" class="menu-item">
                <div class="menu-icon">
                    <i class="fas fa-tshirt"></i>
                </div>
                <div class="menu-content">
                    <p>Mis outfits</p>
                    <span>Sigue recordando</span>
                </div>
            </a>

            <a href="#" class="menu-item">
                <div class="menu-icon">
                    <i class="fas fa-palette"></i>
                </div>
                <div class="menu-content">
                    <p>Maquillaje</p>
                    <span>Combina con belleza</span>
                </div>
            </a>

            <a href="{% url 'configurationsystem' %}" class="menu-item">
                <div class="menu-icon">
                    <i class="fas fa-cog"></i>
                </div>
                <div class="menu-content">
                    <p>Configuraci√≥n</p>
                    <span>Ajustes de la app</span>
                </div>
            </a>

            <a href="{% url 'ayuda_contacto' %}" class="menu-item">
                <div class="menu-icon">
                    <i class="fas fa-question-circle"></i>
                </div>
                <div class="menu-content">
                    <p>Ayuda</p>
                    <span>Soporte</span>
                </div>
            </a>
        </div>
    </div>

    <!-- Datos para JavaScript -->
    {{ imagenes_accesorios|json_script:"accesorios_json" }}
    {{ prendas_segmento_1|json_script:"prendas_segmento_1_json" }}
    {{ prendas_segmento_2|json_script:"prendas_segmento_2_json" }}
    {{ prendas_segmento_3|json_script:"prendas_segmento_3_json" }}

    <script>
        console.log("=== INICIALIZACI√ìN CARRUSEL ===");
        
        // Cargar datos de prendas desde Django
        try {
            window.prendasSegmento1 = JSON.parse(
                document.getElementById("prendas_segmento_1_json").textContent
            ) || [];
            
            window.prendasSegmento2 = JSON.parse(
                document.getElementById("prendas_segmento_2_json").textContent
            ) || [];
            
            window.prendasSegmento3 = JSON.parse(
                document.getElementById("prendas_segmento_3_json").textContent
            ) || [];
            
            console.log("‚úÖ Segmento 1 (Superior):", window.prendasSegmento1.length, "prendas");
            console.log("‚úÖ Segmento 2 (Medio):", window.prendasSegmento2.length, "prendas");
            console.log("‚úÖ Segmento 3 (Inferior):", window.prendasSegmento3.length, "prendas");
            
        } catch (error) {
            console.error("‚ùå Error cargando datos de prendas:", error);
            window.prendasSegmento1 = [];
            window.prendasSegmento2 = [];
            window.prendasSegmento3 = [];
        }
        
        // Cargar accesorios
        try {
            window.accesoriosImagenes = JSON.parse(
                document.getElementById("accesorios_json").textContent
            ) || [];
            console.log("‚úÖ Accesorios:", window.accesoriosImagenes.length, "im√°genes");
        } catch (error) {
            console.error("Error leyendo accesorios:", error);
            window.accesoriosImagenes = [];
        }
        
        console.log("=== FIN INICIALIZACI√ìN ===");
    </script>

    <script src="{% static 'js/inicio.js' %}"></script>
    
</body>
</html>